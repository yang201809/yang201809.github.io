<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="AI、Python、可视化">
    <meta name="description" content="AI改变世界，你可以一直向前！">
    <meta name="author" content="不凡">
    
    <title>
        
            pandas数据分析处理52个常用技巧 |
        
        Yang的博客
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/logo.svg">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"chat-tu.com","root":"/","language":"zh-CN","path":"search.json"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Yang的博客","author":"不凡","avatar":"/images/avatar.svg","logo":"/images/logo.svg","favicon":"/images/logo.svg"},"menu":{"Archives":"/archives","Categories":"/categories","Links":"https://space.bilibili.com/13834960"},"first_screen":{"enable":true,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"行有余力，则以学文.","hitokoto":true},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":false,"hide_header":true},"home":{"category":true,"tag":true,"announcement":null},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["练气","筑基","结丹","元婴","化神"]},"word_count":{"wordcount":true,"min2read":true},"datetime_format":"YYYY-MM-DD","copyright_info":false,"share":false,"reward":{"enable":false,"img_link":null,"text":null}},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":false,"expand_all":false,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":true,"site_uv":true,"site_pv":true,"page_pv":true}},"local_search":{"enable":true,"preload":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.21"},"waline":{"server_url":null,"reaction":false,"version":2},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"jsdelivr"},"pjax":{"enable":true},"footer":{"since":2023,"word_count":false,"icp":{"enable":false,"record_code":null,"url":"https://beian.miit.gov.cn"},"site_deploy":{"enable":false,"provider":"github","url":null},"shields_style":{"enable":false,"custom":[{"link_url":null,"img_url":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","version":"4.0.5"}
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"}
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"}
    KEEP.language_copy_copyright = {"copy":"复制版权信息","copied":"已复制","title":"原文标题","author":"原文作者","link":"原文链接"}
  </script>
<meta name="generator" content="Hexo 7.0.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i>
    
</div>


<main class="page-container border-box">

    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            $pc-search-icon-font-size = 1.5rem
$menu-bar-line-height = 2.5px
$logo-image-box-width = 2.68rem

.header-wrapper {
  display flex
  align-items center
  justify-content center
  box-sizing border-box
  width 100%
  height 100%
  padding-top var(--header-scroll-progress-bar-height)
  background var(--background-color-1)
  box-shadow 1px 2px 6px var(--shadow-color)

  &:hover {
    box-shadow 1px 2px 10px var(--shadow-hover-color)
  }

  .header-content {
    z-index $z-index-5
    display flex
    flex-direction row
    align-items center
    justify-content space-between
    width var(--page-content-width)
    max-width var(--page-content-max-width)
    height 100%
    transition-t("max-width, width", "0, 0", "0.1, 0.1", "ease, ease")


    &.has-first-screen {
      max-width var(--page-content-max-width-2)
    }


    .has-toc & {
      max-width var(--page-content-max-width-2)
    }


    +keep-tablet() {
      width var(--page-content-width-tablet)
    }


    +keep-mobile() {
      width var(--page-content-width-mobile)
    }


    .left {
      display flex
      align-items center
      justify-content flex-start
      height 100%
      font-size 2rem

      transition-t("transform, transform-origin", "0, 0", "0.2, 0.2", "linear, linear")

      .header-shrink & {
        transform scale(0.78)
        transform-origin left
      }


      if (hexo-config('base_info') && hexo-config('base_info.logo')) {
        .logo-image {
          flex-shrink 0
          width $logo-image-box-width
          height $logo-image-box-width
          margin-right 0.5rem


          +keep-tablet() {
            width $logo-image-box-width * 0.9
            height $logo-image-box-width * 0.9
          }


          +keep-mobile() {
            width $logo-image-box-width * 0.8
            height $logo-image-box-width * 0.8
          }


          img {
            width 100%
            border-radius 0.4rem
          }
        }
      }


      .site-name {
        color var(--text-color-1)
        font-weight 600
        font-size var(--header-title-font-size)
        font-family var(--header-title-font-family)
        line-height 1
        letter-spacing 1px

        +keep-tablet() {
          font-size calc(var(--header-title-font-size) * 0.9)
        }

        +keep-mobile() {
          font-size calc(var(--header-title-font-size) * 0.8)
        }

        .is-home & {
          if (hexo-config('first_screen') && hexo-config('first_screen.enable') == true) {
            color var(--first-screen-header-font-color-light)
            filter brightness(92%)

            .dark-mode & {
              color var(--first-screen-header-font-color-dark)
              filter brightness(106%)
            }
          }
        }

        .show-header-drawer & {
          color var(--text-color-1) !important
        }
      }
    }


    .right {
      .pc {
        .menu-list {
          display flex
          align-items center

          +keep-tablet() {
            display none
          }


          .menu-item {
            position relative
            float left
            box-sizing border-box
            margin-left 2rem
            font-size 1rem
            cursor pointer

            &:first-child {
              margin-left 0
            }

            a {
              &::before {
                position absolute
                bottom -10px
                left 50%
                box-sizing border-box
                width 0
                height 2.6px
                background var(--primary-color)
                border-radius 3px
                transform translateX(-50%)
                content ''
                transition-t("transform, bottom, width", "0, 0, 0", "0.2, 0.2, 0.2", "linear, linear, ease")

                .header-shrink & {
                  bottom calc(-1 * calc(var(--header-shrink-height) * 0.5 - 12px))
                }
              }


              &:hover
              &.active {
                &::before {
                  width 100%
                }
              }
            }


            &.search {
              margin-left 26px
              font-size $pc-search-icon-font-size

              i {
                color var(--text-color-3)
              }
            }

            .is-home & {
              if (hexo-config('first_screen') && hexo-config('first_screen.enable') == true) {
                a {
                  color var(--first-screen-header-font-color-light)

                  &:hover {
                    color var(--primary-color)
                  }
                }


                i.search {
                  color var(--first-screen-header-font-color-light)
                }


                .dark-mode & {
                  a {
                    color var(--first-screen-header-font-color-dark)

                    &:hover {
                      color var(--primary-color)
                    }
                  }

                  i.search {
                    color var(--first-screen-header-font-color-dark)
                  }
                }
              }
            }
          }
        }
      }


      .mobile {
        display flex
        align-items center
        justify-content space-between

        .icon-item {
          position relative
          display none
          width 20px
          height 20px
          margin-left 12px
          color var(--text-color-3)
          font-size 18px
          cursor pointer

          i {
            color var(--text-color-3)

            .show-header-drawer & {
              color var(--text-color-3) !important
            }

            .reset-color & {
              color var(--text-color-3) !important
            }
          }

          &:first-child {
            margin-left 0
          }

          +keep-tablet() {
            display flex
            align-items center
            justify-content center
          }
        }


        .menu-bar {
          .menu-bar-middle {
            position relative
            width 18px
            height $menu-bar-line-height
            background var(--text-color-3)

            &::before
            &::after {
              position absolute
              left 0
              width 100%
              height $menu-bar-line-height
              background var(--text-color-3)
              content ''
              transition-t("transform", "0", "0.38", "ease")
            }


            &::before {
              top -6px

              .show-header-drawer & {
                transform translateY(6px) rotate(45deg)
              }
            }


            &::after {
              bottom -6px

              .show-header-drawer & {
                transform translateY(-6px) rotate(-45deg)
              }
            }


            .reset-color & {
              background var(--text-color-3) !important

              &::before
              &::after {
                background var(--text-color-3) !important
              }
            }


            .show-header-drawer & {
              background transparent !important

              &::before
              &::after {
                background var(--text-color-3) !important
              }
            }
          }
        }

        .is-home & {
          if (hexo-config('first_screen') && hexo-config('first_screen.enable') == true) {
            .icon-item i {
              color var(--first-screen-header-font-color-light)
            }

            .menu-bar .menu-bar-middle {
              background var(--first-screen-header-font-color-light)

              &::before
              &::after {
                background var(--first-screen-header-font-color-light)
              }
            }

            .dark-mode & {
              .icon-item i {
                color var(--first-screen-header-font-color-dark)
              }

              .menu-bar .menu-bar-middle {
                background var(--first-screen-header-font-color-dark)

                &::before
                &::after {
                  background var(--first-screen-header-font-color-dark)
                }
              }
            }
          }
        }
      }
    }
  }


  .header-drawer {
    position absolute
    top 0
    left 0
    z-index $z-index-2
    width 100%
    padding var(--header-height) 0 20px 0
    background var(--background-color-1)
    transform scaleY(0)
    transform-origin top
    transition-t("transform", "0", "0.38", "ease")

    .show-header-drawer & {
      transform scaleY(1)
    }

    .drawer-menu-list {
      display flex
      flex-direction column
      align-items center
      justify-content flex-start

      .drawer-menu-item {
        height 38px
        margin 6px 0
        font-size 1rem

        a {
          padding 6px 20px
          color var(--text-color-3)
          border-radius 20px

          &:hover {
            color var(--text-color-2)
            border 1px solid var(--text-color-3)
          }


          &.active {
            color var(--text-color-2)
            border 1px solid var(--text-color-3)
          }
        }
      }
    }
  }


  .window-mask {
    position absolute
    top 0
    z-index $z-index-1
    width 100%
    height 100vh
    background rgba(0, 0, 0, 0.4)
    visibility hidden
    opacity 0
    transition-t("transform, opacity", "0, 0", "0.38, 0.38", "ease, ease")

    .show-header-drawer & {
      visibility visible
      opacity 1
    }
  }
}


.show-header-drawer {
  overflow hidden
}

        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        pandas数据分析处理52个常用技巧
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/avatar.svg">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">不凡</span>
                                
                                    <span class="author-badge">Lv2</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-check"></i>&nbsp;
                <span class="pc">2023-12-03</span>
                <span class="mobile">2023-12-03 11:55</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="pc" data-updated="Sun Dec 03 2023 12:52:33 GMT+0800">2023-12-03</span>
            </span>
        

        

        

        
        
            <span class="meta-info-item post-wordcount">
                <i class="icon fas fa-file-word"></i>&nbsp;<span>5.8k 字</span>
            </span>
        
        
            <span class="meta-info-item post-min2read">
                <i class="icon fas fa-clock"></i>&nbsp;<span>28 分钟</span>
            </span>
        
        
            <span class="meta-info-item post-pv">
                <i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
            </span>
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body">
                    

                    <h1 id="导入工具包"><a href="#导入工具包" class="headerlink" title="导入工具包"></a>导入工具包</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pandas 和numpy是两个基础的工具包</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># matplotlib seaborn是作图工具包</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="comment"># 通过os设置默认路径</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">&#x27;C:/Users/用户/Desktop/&#x27;</span>)  <span class="comment"># 桌面的路径</span></span><br><span class="line"><span class="comment"># 图表中文显示问题</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>] <span class="comment">#用来正常显示中文标签</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span> <span class="comment">#用来正常显示负号</span></span><br><span class="line"><span class="comment"># 不显示预警</span></span><br><span class="line"><span class="keyword">import</span> warnings  </span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="spyder中快捷方式"><a href="#spyder中快捷方式" class="headerlink" title="spyder中快捷方式"></a>spyder中快捷方式</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注释、取消注释</span></span><br><span class="line">Ctrl+<span class="number">1</span></span><br><span class="line"><span class="comment"># 块注释 / 取消块注释  </span></span><br><span class="line">Ctrl+<span class="number">4</span>/<span class="number">5</span></span><br><span class="line"><span class="comment"># 从当前光标所在行开始执行</span></span><br><span class="line">F9</span><br></pre></td></tr></table></figure>
<h1 id="读取excel文件"><a href="#读取excel文件" class="headerlink" title="读取excel文件"></a>读取excel文件</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取文件</span></span><br><span class="line">df = pd.read_excel(<span class="string">&#x27;文件.xlsx&#x27;</span>)</span><br><span class="line"><span class="comment">#　读取文件同时筛选需要的列</span></span><br><span class="line">df = pd.read_excel(<span class="string">&#x27;文件.xlsx&#x27;</span>)[[<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>]] <span class="comment"># 读取并筛选几列</span></span><br><span class="line"><span class="comment"># 读取特定的工作表</span></span><br><span class="line">df = pd.read_excel(<span class="string">&#x27;文件.xlsx&#x27;</span>，sheet_name=<span class="string">&#x27;明细&#x27;</span>) <span class="comment"># 读取某个sheet表</span></span><br><span class="line"><span class="comment"># with方法读取</span></span><br><span class="line"><span class="keyword">with</span> pd.ExcelFile(<span class="string">&#x27;path_to_file.xls&#x27;</span>) <span class="keyword">as</span> xls:</span><br><span class="line">    df1 = pd.read_excel(xls, <span class="string">&#x27;Sheet1&#x27;</span>)</span><br><span class="line">    df2 = pd.read_excel(xls, <span class="string">&#x27;Sheet2&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="读取csv和txt文件"><a href="#读取csv和txt文件" class="headerlink" title="读取csv和txt文件"></a>读取csv和txt文件</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分隔符: \s 表示空白字符; \s+多个空白字符; \r回车; \n换行; \t水平制表符; \v垂直制表符</span></span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;文件.txt&#x27;</span>,sep=<span class="string">&#x27;\s+&#x27;</span>,error_bad_lines=<span class="literal">False</span>)    </span><br></pre></td></tr></table></figure>
<h1 id="批量读取同一文件夹下文件1"><a href="#批量读取同一文件夹下文件1" class="headerlink" title="批量读取同一文件夹下文件1"></a>批量读取同一文件夹下文件1</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">&#x27;.&#x27;</span>,topdown=<span class="literal">False</span>):</span><br><span class="line">    <span class="built_in">print</span>(files)</span><br><span class="line">num = <span class="built_in">len</span>(files)   <span class="comment"># 获取文件个数</span></span><br><span class="line">data = pd.DataFrame()  <span class="comment"># 定义一个空的dataframe</span></span><br><span class="line"><span class="comment"># 遍历所有文件</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">    datai = pd.read_excel(<span class="string">&#x27;./%s&#x27;</span> %files[i])   </span><br><span class="line">    datai_len = <span class="built_in">len</span>(datai)</span><br><span class="line">    data = data.append(datai)   <span class="comment"># 添加到总的数据中</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;文件%i列, 第%i个表,读取%i行数据,名称：%s&#x27;</span>%(<span class="built_in">len</span>(data.columns),i,datai_len,files[i]))     <span class="comment"># 查看是否全部读取，格式是否出错</span></span><br><span class="line">    </span><br><span class="line">data.reset_index(drop=<span class="literal">True</span>,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="批量读取同一文件夹下的文件2"><a href="#批量读取同一文件夹下的文件2" class="headerlink" title="批量读取同一文件夹下的文件2"></a>批量读取同一文件夹下的文件2</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入工具包</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 路径</span></span><br><span class="line">path = <span class="string">&#x27;d:/文件路径/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件列表</span></span><br><span class="line">files = []</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> os.listdir(path):</span><br><span class="line">    <span class="keyword">if</span> file.endswith(<span class="string">&quot;.csv&quot;</span>):</span><br><span class="line">        files.append(path+file)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个空的dataframe</span></span><br><span class="line">data = pd.DataFrame()  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历所有文件</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    datai = pd.read_csv(file,encoding=<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line">    datai_len = <span class="built_in">len</span>(datai)</span><br><span class="line">    data = data.append(datai)   <span class="comment"># 添加到总的数据中</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;读取%i行数据,合并后文件%i列, 名称：%s&#x27;</span>%(datai_len,<span class="built_in">len</span>(data.columns),file.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]))     </span><br><span class="line">    <span class="comment"># 查看是否全部读取，格式是否出错</span></span><br><span class="line"><span class="comment"># 重置索引    </span></span><br><span class="line">data.reset_index(drop=<span class="literal">True</span>,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="批量读取同一文件夹下的文件3"><a href="#批量读取同一文件夹下的文件3" class="headerlink" title="批量读取同一文件夹下的文件3"></a>批量读取同一文件夹下的文件3</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 循环读取数据</span></span><br><span class="line">n = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:    </span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file, <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;gbk&#x27;</span>) <span class="keyword">as</span> f_input:</span><br><span class="line">        lisi= []</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f_input:</span><br><span class="line">            lisi.append(<span class="built_in">list</span>(line.strip().split(<span class="string">&#x27;|&#x27;</span>)))</span><br><span class="line">            </span><br><span class="line">    datai = pd.DataFrame(lisi)</span><br><span class="line">    datai2 = guolv(datai)</span><br><span class="line">    data = data.append(datai2)</span><br><span class="line">            </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;读取第%i个文件,件名%s,文件%i行,文%i列.处理后文件%i行,%i列&#x27;</span> %(n,file,datai.shape[<span class="number">0</span>],datai.shape[<span class="number">1</span>],datai2.shape[<span class="number">0</span>],datai2.shape[<span class="number">1</span>]))</span><br><span class="line">    n = n + <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h1 id="数据导出为excel，同一工作簿"><a href="#数据导出为excel，同一工作簿" class="headerlink" title="数据导出为excel，同一工作簿"></a>数据导出为excel，同一工作簿</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> pd.ExcelWriter(<span class="string">&#x27;文件.xlsx&#x27;</span>) <span class="keyword">as</span> writer:</span><br><span class="line">    df1.to_excel(writer, sheet_name=<span class="string">&#x27;文件1&#x27;</span>)</span><br><span class="line">    df2.to_excel(writer, sheet_name=<span class="string">&#x27;文件2&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="数据导出为excel，分组导出到同一工作簿"><a href="#数据导出为excel，分组导出到同一工作簿" class="headerlink" title="数据导出为excel，分组导出到同一工作簿"></a>数据导出为excel，分组导出到同一工作簿</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">writer = pd.ExcelWriter(<span class="string">&#x27;文件.xlsx&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> name , group <span class="keyword">in</span> df.groupby(<span class="string">&#x27;名称&#x27;</span>):</span><br><span class="line">    group.to_excel(writer,sheet_name=name,index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h1 id="数据导出为excel，分组导出到不同的工作簿"><a href="#数据导出为excel，分组导出到不同的工作簿" class="headerlink" title="数据导出为excel，分组导出到不同的工作簿"></a>数据导出为excel，分组导出到不同的工作簿</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name , group <span class="keyword">in</span> df.groupby(<span class="string">&#x27;名称&#x27;</span>):</span><br><span class="line">    group.to_excel(name+<span class="string">&#x27;.xlsx&#x27;</span>,index=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>
<h1 id="获取当前时间"><a href="#获取当前时间" class="headerlink" title="获取当前时间"></a>获取当前时间</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">tim = time.strftime(<span class="string">&quot;%Y-%m-%d%H%M%S&quot;</span>, time.localtime()) </span><br></pre></td></tr></table></figure>
<h1 id="保存图片分辨率设置"><a href="#保存图片分辨率设置" class="headerlink" title="保存图片分辨率设置"></a>保存图片分辨率设置</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.savefig(<span class="string">&#x27;名称.png&#x27;</span>,dpi=<span class="number">150</span>)  </span><br></pre></td></tr></table></figure>
<h1 id="数据查看"><a href="#数据查看" class="headerlink" title="数据查看"></a>数据查看</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df.describe()   <span class="comment"># 描述统计</span></span><br><span class="line">df.info()    <span class="comment"># 基本信息</span></span><br><span class="line">df.dtypes    <span class="comment">#　列格式类型</span></span><br><span class="line">df.head(<span class="number">2</span>)    ＃前n行</span><br><span class="line">df.tail(<span class="number">2</span>)    <span class="comment">#后ｎ行</span></span><br><span class="line">df.shape    ＃维度</span><br><span class="line">df.index  <span class="comment">#索引</span></span><br><span class="line">df.columns  ＃列名</span><br><span class="line">df.sample(<span class="number">10</span>)   <span class="comment">#随机抽样</span></span><br><span class="line">df.resample()　 <span class="comment">#随机抽样</span></span><br></pre></td></tr></table></figure>
<h1 id="行列处理（删除、排序）"><a href="#行列处理（删除、排序）" class="headerlink" title="行列处理（删除、排序）"></a>行列处理（删除、排序）</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除列</span></span><br><span class="line"><span class="keyword">del</span> df[<span class="string">&#x27;变量名&#x27;</span>]</span><br><span class="line">df.drop(<span class="string">&#x27;变量名&#x27;</span>,axis=<span class="number">1</span>,inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 删除行</span></span><br><span class="line">df.drop(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"><span class="comment"># 更改列名</span></span><br><span class="line">df.columns= [<span class="string">&#x27;var1&#x27;</span>,<span class="string">&#x27;var2&#x27;</span>,<span class="string">&#x27;var3&#x27;</span>]  <span class="comment"># 列名的个数 = 字段个数</span></span><br><span class="line">df.rename(columns = &#123;<span class="string">&#x27;名称前&#x27;</span>:<span class="string">&#x27;名称后&#x27;</span>&#125;,inplace=<span class="literal">True</span>)   <span class="comment"># columns 不能少</span></span><br><span class="line"><span class="comment"># series中改列名</span></span><br><span class="line">s.rename(<span class="string">&#x27;名称&#x27;</span>,inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 调整列的顺序</span></span><br><span class="line">df1 = df1[[<span class="string">&#x27;var1&#x27;</span>,<span class="string">&#x27;var2&#x27;</span>,<span class="string">&#x27;var3&#x27;</span>]]</span><br><span class="line"><span class="comment"># 调整行的顺序</span></span><br><span class="line">df2 = df1.reindex([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]) <span class="comment"># 返回一个新的DataFrame，按新的索引进行排序</span></span><br></pre></td></tr></table></figure>
<h1 id="缺失值（查看、替换、计数）"><a href="#缺失值（查看、替换、计数）" class="headerlink" title="缺失值（查看、替换、计数）"></a>缺失值（查看、替换、计数）</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 判断是否是缺失值</span></span><br><span class="line">df.isnull()  <span class="comment">#不能省略括号</span></span><br><span class="line">df.notnull()</span><br><span class="line"><span class="comment"># 计算缺失值个数</span></span><br><span class="line">s.isnull().value_counts()</span><br><span class="line"><span class="comment"># 每列缺失值个数</span></span><br><span class="line">df.isna().<span class="built_in">sum</span>()  <span class="comment"># 缺失值个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 填充缺失值</span></span><br><span class="line">df[<span class="string">&#x27;A&#x27;</span>].fillna(<span class="string">&#x27;缺失数据&#x27;</span>,inplace=<span class="literal">True</span>)  </span><br><span class="line">data1.fillna(method=<span class="string">&#x27;pad&#x27;</span>)   <span class="comment"># 类似于excel中用上一个单元格内容批量填充</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># 删除指定列包含缺失值的行</span></span><br><span class="line">data.dropna(subset=[<span class="string">&quot;C&quot;</span>],inplace=<span class="literal">True</span>)    <span class="comment"># []不能少</span></span><br><span class="line">data.dropna(how=<span class="string">&quot;all&quot;</span>)   <span class="comment"># 删除全为空的行</span></span><br><span class="line">data.dropna(thresh=<span class="number">2</span>)    <span class="comment">#删除有效数据小于2的数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 缺失值个数并排序</span></span><br><span class="line">df.isnull().<span class="built_in">sum</span>().sort_values(ascending=<span class="literal">False</span>).head()</span><br></pre></td></tr></table></figure>
<h1 id="重复值（查看、删除）"><a href="#重复值（查看、删除）" class="headerlink" title="重复值（查看、删除）"></a>重复值（查看、删除）</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不重复项</span></span><br><span class="line">df[<span class="string">&#x27;A&#x27;</span>].unique()  </span><br><span class="line">df[<span class="string">&#x27;A&#x27;</span>].nunique() <span class="comment">#查看不重复值个数</span></span><br><span class="line">df[<span class="string">&#x27;A&#x27;</span>].unique().tolist()   <span class="comment"># 转list </span></span><br><span class="line">df[<span class="string">&#x27;A&#x27;</span>].value_counts()  <span class="comment"># 计数</span></span><br><span class="line"><span class="comment"># 去重</span></span><br><span class="line"><span class="built_in">set</span>(data2[<span class="string">&#x27;名称&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看重复项，返回True False</span></span><br><span class="line">df.duplicated()  </span><br><span class="line"><span class="comment"># 查看重复的数据</span></span><br><span class="line">data4 = data3[data3.duplicated(subset=<span class="string">&#x27;var1&#x27;</span>,keep=<span class="literal">False</span>)]  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除重复项</span></span><br><span class="line">df.drop_duplicates([<span class="string">&#x27;var&#x27;</span>],inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 按两列去重</span></span><br><span class="line">data.drop_duplicates(subset=[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>],keep=<span class="string">&#x27;first&#x27;</span>,inplace=<span class="literal">True</span>)  </span><br><span class="line"><span class="comment"># 分组计算不重复项个数</span></span><br><span class="line">result = df.groupby([<span class="string">&#x27;var1&#x27;</span>,<span class="string">&#x27;var2&#x27;</span>]).agg(&#123;<span class="string">&#x27;var3&#x27;</span>:<span class="string">&#x27;nunique&#x27;</span>,<span class="string">&#x27;var4&#x27;</span>:[<span class="string">&#x27;min&#x27;</span>,<span class="string">&#x27;max&#x27;</span>]&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="修改格式-格式转换-百分比-格式判断"><a href="#修改格式-格式转换-百分比-格式判断" class="headerlink" title="修改格式((格式转换, 百分比, 格式判断))"></a>修改格式((格式转换, 百分比, 格式判断))</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 改变列的格式（文本型数值改成数值型数值）</span></span><br><span class="line">df[<span class="string">&#x27;var1&#x27;</span>] = df[<span class="string">&#x27;var1&#x27;</span>].astype(<span class="string">&#x27;int&#x27;</span>)  <span class="comment"># errors = &#x27;ignore&#x27;</span></span><br><span class="line">df[<span class="string">&#x27;var1&#x27;</span>] = df[<span class="string">&#x27;var1&#x27;</span>].astype(np.<span class="built_in">float</span>)</span><br><span class="line"><span class="comment"># 多列转换</span></span><br><span class="line">df[[<span class="string">&#x27;user_id&#x27;</span>,<span class="string">&#x27;merchant_id&#x27;</span>,<span class="string">&#x27;coupon_id&#x27;</span>]]=df[[<span class="string">&#x27;user_id&#x27;</span>,<span class="string">&#x27;merchant_id&#x27;</span>,<span class="string">&#x27;coupon_id&#x27;</span>]].astype(<span class="built_in">str</span>)  </span><br><span class="line">df.infer_objects()  <span class="comment"># 根据数据特征自动转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 百分比格式</span></span><br><span class="line">data[<span class="string">&#x27;B_per%&#x27;</span>] = data[<span class="string">&#x27;B_per&#x27;</span>].apply(<span class="keyword">lambda</span> x: <span class="string">&#x27;%.2f%%&#x27;</span> % (x*<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断格式，是否为字符串</span></span><br><span class="line">data[<span class="string">&#x27;var&#x27;</span>].apply(<span class="keyword">lambda</span> x:<span class="built_in">isinstance</span>(x,<span class="built_in">str</span>))</span><br></pre></td></tr></table></figure>
<h1 id="普通筛选"><a href="#普通筛选" class="headerlink" title="普通筛选"></a>普通筛选</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># loc筛选：选择符合条件的行</span></span><br><span class="line">df.loc[df[<span class="string">&quot;grade&quot;</span>] == <span class="string">&quot;B&quot;</span>].head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择符合条件的行和特定的列</span></span><br><span class="line">df.loc[df[<span class="string">&quot;grade&quot;</span>] == <span class="string">&quot;B&quot;</span>, [<span class="string">&quot;member_id&quot;</span>, <span class="string">&quot;grade&quot;</span>]].head()</span><br><span class="line"><span class="comment"># 选择符合条件的行和特定的列,并排序</span></span><br><span class="line">df.loc[df[<span class="string">&quot;grade&quot;</span>] == <span class="string">&quot;B&quot;</span>, [<span class="string">&quot;loan_amnt&quot;</span>, <span class="string">&quot;grade&quot;</span>]].sort([<span class="string">&quot;loan_amnt&quot;</span>])</span><br><span class="line"><span class="comment"># 多条件筛选</span></span><br><span class="line">df.loc[[(df[<span class="string">&quot;gradd&quot;</span>]==<span class="string">&quot;B&quot;</span>) &amp; (df[<span class="string">&quot;loan_amnt&quot;</span>]&gt;<span class="number">5000</span>), [<span class="string">&quot;member_id&quot;</span>, <span class="string">&quot;term&quot;</span> ]].head()</span><br><span class="line"><span class="comment"># 反选</span></span><br><span class="line">data[~((data.发布时间.isnull()) &amp; (data.实际首试日期 &lt; <span class="string">&#x27;2018-11-1&#x27;</span>))]</span><br><span class="line"><span class="comment"># 反转行</span></span><br><span class="line">df.iloc[::-<span class="number">1</span>, :] </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="逻辑判断后筛选"><a href="#逻辑判断后筛选" class="headerlink" title="逻辑判断后筛选"></a>逻辑判断后筛选</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># isin筛选</span></span><br><span class="line">df[<span class="string">&quot;A&quot;</span>].isin([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="comment">#　多条件</span></span><br><span class="line">df[(df.AAA &lt;= <span class="number">6</span>) &amp; (df.index.isin([<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>]))]</span><br><span class="line"><span class="comment"># loc和isin组合　</span></span><br><span class="line">df.loc[df[<span class="string">&#x27;sepal_length&#x27;</span>].isin([<span class="number">5.8</span>,<span class="number">5.1</span>])]</span><br><span class="line"><span class="comment"># 字符串isin</span></span><br><span class="line">df.loc[df[<span class="string">&#x27;grade&#x27;</span>].isin([<span class="string">&#x27;北京&#x27;</span>,<span class="string">&#x27;上海&#x27;</span>])]</span><br><span class="line"><span class="comment">#　字符串开头</span></span><br><span class="line">df[df[<span class="string">&#x27;A&#x27;</span>].<span class="built_in">str</span>.startswith(<span class="string">&#x27;北京&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># contains筛选</span></span><br><span class="line">df[df[<span class="string">&#x27;商品名称&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&quot;四件套&quot;</span>)]</span><br><span class="line"><span class="comment"># 多个筛选</span></span><br><span class="line">df_re =df[df[<span class="string">&#x27;公司&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;公司A||公司B&#x27;</span>)]</span><br><span class="line"><span class="comment"># 筛选含特殊字符的</span></span><br><span class="line">df[df[<span class="string">&#x27;产业线&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">&#x27;\?&#x27;</span>)] </span><br><span class="line"><span class="comment"># 多条件筛选</span></span><br><span class="line">data[(data[<span class="string">&#x27;var1&#x27;</span>].<span class="built_in">str</span>[<span class="number">0</span>] == <span class="string">&#x27;M&#x27;</span>)&amp;(data[<span class="string">&#x27;var2&#x27;</span>].apply(<span class="keyword">lambda</span> x : <span class="built_in">str</span>(x)[<span class="number">0</span>] == <span class="string">&#x27;8&#x27;</span>))]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引特殊用法</span></span><br><span class="line">df[[i.endswith(<span class="string">&#x27;A&#x27;</span>) <span class="keyword">for</span> i <span class="keyword">in</span> df.index]] </span><br><span class="line"></span><br><span class="line"><span class="comment"># 按字符串长度筛选</span></span><br><span class="line">data = df[df[<span class="string">&#x27;名称&#x27;</span>].<span class="built_in">str</span>.<span class="built_in">len</span>()&gt;<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按字符串开头筛选</span></span><br><span class="line">df[df[<span class="string">&#x27;名称&#x27;</span>].<span class="built_in">str</span>[<span class="number">0</span>] == <span class="string">&#x27;M&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 筛选列</span></span><br><span class="line">data = data.loc[:,~(data.columns.<span class="built_in">str</span>.contains(<span class="string">&#x27;集团&#x27;</span>))]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 筛选前几个最大值</span></span><br><span class="line">data = df.iloc[df[<span class="string">&#x27;名称&#x27;</span>].nlargest(<span class="number">3</span>).index]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 筛选由汉字开头的数据</span></span><br><span class="line">df = df[df[<span class="string">&#x27;名称&#x27;</span>].<span class="built_in">str</span>.contains(<span class="string">r&#x27;^[\u4e00-\u9fa5]&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日期不是索引时, 按日期筛选 </span></span><br><span class="line">data[data[<span class="string">&#x27;时间&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.year == <span class="number">2019</span>)]  </span><br><span class="line">data[data[<span class="string">&#x27;时间&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.strftime(<span class="string">&#x27;%Y%m&#x27;</span>)==<span class="string">&#x27;202008&#x27;</span>)]</span><br></pre></td></tr></table></figure>
<h1 id="分组后筛选"><a href="#分组后筛选" class="headerlink" title="分组后筛选"></a>分组后筛选</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分组后筛选前2个</span></span><br><span class="line">df2 = df1.groupby([<span class="string">&#x27;class&#x27;</span>]).head(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组后筛选第2条或者倒数第2条数据</span></span><br><span class="line">df1.groupby(<span class="string">&#x27;class&#x27;</span>).apply(<span class="keyword">lambda</span> i:i.iloc[<span class="number">1</span>] <span class="keyword">if</span> <span class="built_in">len</span>(i)&gt;<span class="number">1</span> <span class="keyword">else</span> np.nan)</span><br><span class="line">df1.groupby(<span class="string">&#x27;class&#x27;</span>).apply(<span class="keyword">lambda</span> i:i.iloc[-<span class="number">2</span>] <span class="keyword">if</span> <span class="built_in">len</span>(i)&gt;<span class="number">1</span> <span class="keyword">else</span> np.nan)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组后按条件筛选</span></span><br><span class="line">data.groupby(<span class="string">&#x27;var1&#x27;</span>).<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: <span class="built_in">len</span>(x[x[<span class="string">&#x27;var2&#x27;</span>]==<span class="string">&#x27;A&#x27;</span>])&gt;=<span class="number">1</span>)</span><br><span class="line">data.groupby(<span class="string">&#x27;公司编码&#x27;</span>).<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:<span class="built_in">len</span>(x)!=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># groupby筛选方法1（先分组，然后筛选另一个变量中最小值）</span></span><br><span class="line">df.loc[df.groupby(<span class="string">&#x27;AA&#x27;</span>)[<span class="string">&#x27;BB&#x27;</span>].inxmin()]</span><br><span class="line"><span class="comment">#groupby筛选方法2：（先排序，分组，然后筛选每一组中的第一个）</span></span><br><span class="line">df.sort_values(by=<span class="string">&#x27;BB&#x27;</span>).groupby(<span class="string">&#x27;AA&#x27;</span>,as_index=<span class="literal">False</span>).first()</span><br><span class="line"><span class="comment"># groupby筛选方法3：groupby与apply结合</span></span><br><span class="line">df.groupby(<span class="string">&#x27;aa&#x27;</span>).apply(<span class="keyword">lambda</span> x :  x[<span class="string">&#x27;BB&#x27;</span>][x[<span class="string">&#x27;cc&#x27;</span>].idxmax()]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分组并排序</span></span><br><span class="line">df[[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>]].groupby(<span class="string">&#x27;A&#x27;</span>).mean().sort_values(<span class="string">&#x27;B&#x27;</span>,ascending=<span class="literal">False</span>).head()</span><br></pre></td></tr></table></figure>
<h1 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单个替换</span></span><br><span class="line">df[<span class="string">&#x27;判断&#x27;</span>].replace([<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;C&#x27;</span>],np.nan,inplace=<span class="literal">True</span>)   <span class="comment">#支持正则表达式</span></span><br><span class="line"><span class="comment"># 多个替换</span></span><br><span class="line">data[<span class="string">&#x27;var&#x27;</span>].replace([<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>],[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>],inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># loc原地替换</span></span><br><span class="line">df1.loc[df[<span class="string">&#x27;sex&#x27;</span>]==<span class="string">&#x27;female&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>] = <span class="number">1</span></span><br><span class="line">df1.loc[df[<span class="string">&#x27;sex&#x27;</span>]==<span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字典</span></span><br><span class="line">df.replace(&#123;<span class="string">&#x27;female&#x27;</span>:<span class="number">1</span>, <span class="string">&#x27;male&#x27;</span>:<span class="number">0</span>&#125;)</span><br><span class="line"><span class="comment"># 适合二分法</span></span><br><span class="line">df1[<span class="string">&#x27;sex&#x27;</span>] = df1[<span class="string">&#x27;sex&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> x:<span class="number">1</span> <span class="keyword">if</span> x==<span class="string">&#x27;female&#x27;</span> <span class="keyword">else</span> <span class="number">0</span>)</span><br><span class="line"><span class="comment"># apply</span></span><br><span class="line">df_zb[<span class="string">&#x27;var&#x27;</span>] = df_zb[<span class="string">&#x27;var&#x27;</span>].apply(<span class="keyword">lambda</span> x: x[:-<span class="number">1</span>] <span class="keyword">if</span> x[-<span class="number">1</span>].isalpha() <span class="keyword">else</span> x)</span><br><span class="line">data3[<span class="string">&#x27;var&#x27;</span>] = data3[<span class="string">&#x27;var&#x27;</span>].apply(<span class="keyword">lambda</span> x: x[:-<span class="number">1</span>] <span class="keyword">if</span> x[-<span class="number">1</span>] == <span class="string">&#x27;s&#x27;</span> <span class="keyword">else</span> x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># np.where</span></span><br><span class="line">data[<span class="string">&#x27;var&#x27;</span>] = np.where(data[<span class="string">&#x27;var&#x27;</span>] == <span class="string">&#x27; &#x27;</span>,<span class="number">0</span>,data[<span class="string">&#x27;var&#x27;</span>])</span><br></pre></td></tr></table></figure>
<h1 id="字符串处理"><a href="#字符串处理" class="headerlink" title="字符串处理"></a>字符串处理</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;我的名字是%s，今年%i岁，体重%.2f&#x27;</span>%(<span class="string">&#x27;小明&#x27;</span>,<span class="number">20</span>,<span class="number">70.1</span>))</span><br><span class="line"><span class="comment"># 去除空格，改变大小写</span></span><br><span class="line">df[<span class="string">&#x27;term&#x27;</span>] = df[<span class="string">&#x27;term&#x27;</span>].<span class="built_in">map</span>(<span class="built_in">str</span>.strip)  <span class="comment">#去除左右两边的空格，strip后面是否带括号</span></span><br><span class="line">df[<span class="string">&#x27;term&#x27;</span>] = df[<span class="string">&#x27;term&#x27;</span>].<span class="built_in">str</span>.strip()</span><br><span class="line">df[<span class="string">&#x27;term&#x27;</span>] = df[<span class="string">&#x27;term&#x27;</span>].<span class="built_in">map</span>(<span class="built_in">str</span>.lstrip)  <span class="comment">#去除左边的空格</span></span><br><span class="line">df[<span class="string">&#x27;term&#x27;</span>] = df[<span class="string">&#x27;term&#x27;</span>].<span class="built_in">map</span>(<span class="built_in">str</span>.rstrip)  <span class="comment">#去除右边的空格</span></span><br><span class="line">df[<span class="string">&#x27;term&#x27;</span>] = df[<span class="string">&#x27;term&#x27;</span>].<span class="built_in">map</span>(<span class="built_in">str</span>.upper)  <span class="comment"># 改成全部大写</span></span><br><span class="line">df[<span class="string">&#x27;term&#x27;</span>] = df[<span class="string">&#x27;term&#x27;</span>].<span class="built_in">map</span>(<span class="built_in">str</span>.lower) <span class="comment"># 改成全部小写</span></span><br><span class="line">df[<span class="string">&#x27;term&#x27;</span>] = df[<span class="string">&#x27;term&#x27;</span>].<span class="built_in">map</span>(<span class="built_in">str</span>.title) <span class="comment"># 改成首字母大写</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 去掉所有空格</span></span><br><span class="line">data = data.applymap(<span class="keyword">lambda</span> x: x.strip() <span class="keyword">if</span> <span class="built_in">isinstance</span>(x,<span class="built_in">str</span>) <span class="keyword">else</span> x)</span><br></pre></td></tr></table></figure>
<h1 id="字符串判断"><a href="#字符串判断" class="headerlink" title="字符串判断"></a>字符串判断</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 判断是否为某一特定格式</span></span><br><span class="line">df[<span class="string">&#x27;emp_length&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.isalpha())   <span class="comment">#是否为字母</span></span><br><span class="line">df[<span class="string">&#x27;emp_length&#x27;</span>].apply(<span class="keyword">lambda</span> x: x. isalnum ())  <span class="comment">#是否全未数字或者字母</span></span><br><span class="line">df[<span class="string">&#x27;emp_length&#x27;</span>].apply(<span class="keyword">lambda</span> x: x. isdigit ())  <span class="comment">#是否为数字</span></span><br></pre></td></tr></table></figure>
<h1 id="字符串拆分"><a href="#字符串拆分" class="headerlink" title="字符串拆分"></a>字符串拆分</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s.<span class="built_in">str</span>.split(<span class="string">&#x27;_&#x27;</span>)  <span class="comment"># 拆分，结果是列表</span></span><br><span class="line">s.<span class="built_in">str</span>.split(<span class="string">&#x27;_&#x27;</span>).<span class="built_in">str</span>.get(<span class="number">1</span>)   <span class="comment"># 拆分后取第一个，可用于生成新变量</span></span><br><span class="line">s.<span class="built_in">str</span>.split(<span class="string">&#x27;_&#x27;</span>).<span class="built_in">str</span>[<span class="number">1</span>]       <span class="comment"># 拆分后取第一个，可用于生成新变量</span></span><br><span class="line">s.<span class="built_in">str</span>.split(<span class="string">&#x27;_&#x27;</span>, expand=<span class="literal">True</span>) <span class="comment"># 拆分，并展开成多列</span></span><br><span class="line">s.<span class="built_in">str</span>.split(<span class="string">&#x27;_&#x27;</span>, expand=<span class="literal">True</span>, n=<span class="number">1</span>)   <span class="comment"># 按第一个拆分</span></span><br><span class="line">s.<span class="built_in">str</span>.rsplit(<span class="string">&#x27;_&#x27;</span>, expand=<span class="literal">True</span>, n=<span class="number">1</span>)  <span class="comment"># 按最后一个拆分</span></span><br><span class="line">data[<span class="string">&#x27;var&#x27;</span>] = data[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">str</span>.split(<span class="string">&#x27;?&#x27;</span>,expand=<span class="literal">True</span>)[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 把列变成索引</span></span><br><span class="line">df.set_index(<span class="string">&#x27;时间&#x27;</span>,inplace=<span class="literal">True</span>, drop = <span class="literal">False</span>)  </span><br><span class="line">df.set_index([<span class="string">&#x27;r&#x27;</span>,<span class="string">&#x27;s&#x27;</span>], inplace = <span class="literal">True</span>) <span class="comment"># r为一级，s为二级</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消层次化索引，将索引变回列</span></span><br><span class="line">df.reset_index(inplace=<span class="literal">True</span>)</span><br><span class="line">df.reset_index(drop=<span class="literal">True</span>,inplace=<span class="literal">True</span>,level = <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按索引排序</span></span><br><span class="line">df.sort_index(inplace=<span class="literal">True</span>,ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更新索引（行、列都可以修改）</span></span><br><span class="line">df2 = df1.reindex([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]) <span class="comment"># 返回一个新的DataFrame，按新的索引进行排序</span></span><br><span class="line">df2 = df1.reindex([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>],  fill_value=<span class="number">0</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 多级索引问题（索引可以在行，也可以在列）</span></span><br><span class="line">df.index.names=[<span class="string">&#x27;类型&#x27;</span>,<span class="string">&#x27;供应商&#x27;</span>]  <span class="comment"># 取名称</span></span><br><span class="line">df.columns.names=[<span class="string">&#x27;类型&#x27;</span>,<span class="string">&#x27;日期&#x27;</span>]  <span class="comment"># 取名称</span></span><br><span class="line">df1 = df.swaplevel(<span class="string">&#x27;类型&#x27;</span>,<span class="string">&#x27;日期&#x27;</span>,axis=<span class="number">1</span>)  <span class="comment">#调整多级索引次序</span></span><br><span class="line">df1 = df.sort_index(level=<span class="number">0</span>, axis=<span class="number">1</span>, ascending=<span class="literal">True</span>,sort_remaining=<span class="literal">False</span>)   <span class="comment"># sort_remaining 默认是True</span></span><br><span class="line">df1 = df.<span class="built_in">sum</span>(axis=<span class="number">1</span>,level=<span class="string">&#x27;类型&#x27;</span>)  <span class="comment"># 通过索引对多列进行求和</span></span><br></pre></td></tr></table></figure>
<h1 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># na_position对NaN值的处理方式，可以选择first和last两种方式</span></span><br><span class="line">df.sort()   </span><br><span class="line"><span class="comment"># 单列排序</span></span><br><span class="line">df.sort([<span class="string">&quot;loan_amnt&quot;</span>],ascending=<span class="literal">False</span>)  <span class="comment"># 降序</span></span><br><span class="line"><span class="comment"># 多列进行排序,加入一个列表</span></span><br><span class="line">df.sort([<span class="string">&quot;loan_amnt&quot;</span>,<span class="string">&quot;int_rate&quot;</span>],ascending=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 升序排列后选择前10</span></span><br><span class="line">df.sort([<span class="string">&quot;loan_amnt&quot;</span>],ascending=<span class="literal">True</span>).head(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># 自定义排序</span></span><br><span class="line">df.sort_values(by=[<span class="string">&#x27;日期&#x27;</span>,<span class="string">&#x27;类型&#x27;</span>,<span class="string">&#x27;距离&#x27;</span>],ascending=<span class="literal">True</span>,inplace=<span class="literal">True</span>,na_position = <span class="string">&#x27;last&#x27;</span>)   </span><br><span class="line"><span class="comment"># 索引排序</span></span><br><span class="line">df.sort_index(inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置成日期格式</span></span><br><span class="line">df[<span class="string">&#x27;创建日期&#x27;</span>] = pd.to_datetime(data_final[<span class="string">&#x27;创建日期&#x27;</span>],<span class="built_in">format</span>=<span class="string">&#x27;%Y/%m/%d&#x27;</span>)</span><br><span class="line"><span class="comment"># 设置为日期索引</span></span><br><span class="line">df.set_index(<span class="string">&#x27;订单提交时间&#x27;</span>,inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 日期索引排序</span></span><br><span class="line">df.sort_index(inplace=<span class="literal">True</span>,ascending=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 日期索引的筛选</span></span><br><span class="line">df_2019 = df[<span class="string">&#x27;2019&#x27;</span>]  <span class="comment"># 日期索引可以直接这样筛选  </span></span><br><span class="line">df[<span class="string">&#x27;2019-01&#x27;</span>]  <span class="comment">#按月筛选</span></span><br><span class="line">df[<span class="string">&#x27;2019-03-12&#x27;</span>:<span class="string">&#x27;2019-03-12&#x27;</span>] <span class="comment">#筛选某一天数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 改变显示频率（只针对日期索引）</span></span><br><span class="line">df = df.to_period(<span class="string">&#x27;M&#x27;</span>)  <span class="comment"># 针对索引，关键步骤  Q 季度 Y年 D天</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算时间间隔</span></span><br><span class="line">data[<span class="string">&#x27;间隔天数&#x27;</span>] = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x.days, pd.to_datetime(<span class="string">&#x27;today&#x27;</span>) - data[<span class="string">&#x27;生产时间&#x27;</span>]))</span><br><span class="line">df[<span class="string">&#x27;天数&#x27;</span>] = df[<span class="string">&#x27;天数&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.days)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单独表示间隔天数</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line">aDay = timedelta(days=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间对象格式化</span></span><br><span class="line">df[<span class="string">&#x27;DATE&#x27;</span>] = [datetime.strftime(x,<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="keyword">for</span> x <span class="keyword">in</span> df[<span class="string">&#x27;DATE&#x27;</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间分组后计算</span></span><br><span class="line">final = data.groupby(data[<span class="string">&#x27;订单时间&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.strftime(<span class="string">&#x27;%Y%m&#x27;</span>)))[<span class="string">&#x27;总价&#x27;</span>].<span class="built_in">sum</span>()/<span class="number">10000</span></span><br><span class="line">data.groupby(data[<span class="string">&#x27;日期&#x27;</span>].apply(<span class="keyword">lambda</span> x: datetime.strftime(x,<span class="string">&#x27;%Y-%m-%d&#x27;</span>)))[<span class="string">&#x27;var&#x27;</span>].count()</span><br><span class="line">data.set_index(<span class="string">&#x27;日期&#x27;</span>).groupby(<span class="string">&#x27;供应商&#x27;</span>)[<span class="string">&#x27;数量&#x27;</span>].rolling(<span class="string">&#x27;7D&#x27;</span>).<span class="built_in">sum</span>().reset_index()</span><br><span class="line">final1 = data.groupby([data.to_period(<span class="string">&#x27;Q&#x27;</span>).index,<span class="string">&#x27;var&#x27;</span>]).apply(<span class="keyword">lambda</span> g: np.average(g[<span class="string">&#x27;var2&#x27;</span>], weights=g[<span class="string">&#x27;模次&#x27;</span>])).reset_index()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前时间</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">starttime = time.time()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前日期</span></span><br><span class="line">tim = time.strftime(<span class="string">&quot;%Y-%m-%d%H%M%S&quot;</span>, time.localtime())</span><br><span class="line"></span><br><span class="line"><span class="comment"># pd.date_range  时间戳  pd.period_range 时间周期  pd.timedelta_range  时间间隔</span></span><br><span class="line">datelist = pd.date_range(<span class="string">&#x27;2020/11/21&#x27;</span>, periods=<span class="number">5</span>)</span><br><span class="line">datelist = pd.date_range(<span class="string">&#x27;2020/11/21&#x27;</span>, periods=<span class="number">5</span>,freq=<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line"><span class="comment"># 生成的数据是每月月初</span></span><br><span class="line">index= pd.date_range(<span class="string">&#x27;2019/02/01&#x27;</span>, periods=<span class="number">23</span>,freq=<span class="string">&#x27;MS&#x27;</span>)</span><br><span class="line">pd.date_range(<span class="string">&#x27;2017-01-01 01:00:00&#x27;</span>, <span class="string">&#x27;2017-01-01 02:00:00&#x27;</span>, freq= <span class="string">&#x27;5min&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当前日期前3天</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">lis = pd.date_range(end=<span class="string">&#x27;2021-4-21&#x27;</span>,periods=<span class="number">3</span>)</span><br><span class="line">str_lis = [datetime.strftime(x,<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="keyword">for</span> x <span class="keyword">in</span> lis]</span><br><span class="line">lis = pd.date_range(end=time.strftime(<span class="string">&quot;%Y/%m/%d&quot;</span>),periods=<span class="number">3</span>)</span><br><span class="line">str_lis = [datetime.strftime(x,<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="keyword">for</span> x <span class="keyword">in</span> lis]</span><br></pre></td></tr></table></figure>
<h1 id="判断是否为假期"><a href="#判断是否为假期" class="headerlink" title="判断是否为假期"></a>判断是否为假期</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> chinese_calendar</span><br><span class="line">demo_time = datetime.date(<span class="number">2018</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 判断是否是节假日</span></span><br><span class="line">data_is_holiday = chinese_calendar.is_holiday(demo_time)  <span class="comment"># True</span></span><br><span class="line"><span class="comment"># 判断某日是否工作日</span></span><br><span class="line">data_is_workday = chinese_calendar.is_workday(demo_time)  <span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h1 id="数据分组"><a href="#数据分组" class="headerlink" title="数据分组"></a>数据分组</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法1</span></span><br><span class="line">data[<span class="string">&#x27;for_m&#x27;</span>] = pd.cut(data[<span class="string">&#x27;fortune_x&#x27;</span>],[<span class="number">0</span>,<span class="number">50</span>,<span class="number">70</span>,<span class="number">500</span>],labels = [<span class="string">&#x27;财低&#x27;</span>,<span class="string">&#x27;财中&#x27;</span>,<span class="string">&#x27;财高&#x27;</span>])</span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;value&#x27;</span>: np.random.randint(<span class="number">0</span>, <span class="number">100</span>, <span class="number">20</span>)&#125;)</span><br><span class="line">labels = [<span class="string">&quot;&#123;0&#125; - &#123;1&#125;&quot;</span>.<span class="built_in">format</span>(i, i + <span class="number">9</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>)]</span><br><span class="line">df[<span class="string">&#x27;group&#x27;</span>] = pd.cut(df.value, <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">105</span>, <span class="number">10</span>), right=<span class="literal">False</span>, labels=labels)</span><br></pre></td></tr></table></figure>
<h1 id="多表合并"><a href="#多表合并" class="headerlink" title="多表合并"></a>多表合并</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认纵向连接，产生新的坐标轴   </span></span><br><span class="line">df = pd.concat([df1,df2],ignore_index=<span class="literal">True</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># merge 合并</span></span><br><span class="line">pd.merge(left,  right,  left_on=<span class="string">&quot;lkey&quot;</span>,  right_on=<span class="string">&quot;rkey&quot;</span>,suffixes=(<span class="string">&quot;_left&quot;</span>,  <span class="string">&quot;_right&quot;</span>))</span><br><span class="line">pd.merge(df, df, left_on=[<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>], right_on=[<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>], suffixes=(<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># append 表头一致的多张表，进行连接（上下连接）</span></span><br><span class="line">df1.append(df2).append(df3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># combine_first</span></span><br><span class="line">数据填补.有两张表left和right，一般要求它们的表格结构一致，数据量也一致，使用right的数据去填补left的数据缺漏, 如果在同一位置left与right数据不一致，保留left的数据</span><br><span class="line">df1.combine_first(df2)</span><br></pre></td></tr></table></figure>
<h1 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">count()非空观测数量  </span><br><span class="line"><span class="built_in">sum</span>()所有值之和      </span><br><span class="line">mean()所有值的平均值   </span><br><span class="line">median()所有值的中位数</span><br><span class="line">mode()值的模值       </span><br><span class="line">std()值的标准偏差    </span><br><span class="line">var()方差             </span><br><span class="line"><span class="built_in">min</span>()所有值中的最小值  </span><br><span class="line"><span class="built_in">max</span>()所有值中的最大值 </span><br><span class="line"><span class="built_in">abs</span>()绝对值          </span><br><span class="line">prod()数组元素的乘积  </span><br><span class="line">cumsum()累计总和     </span><br><span class="line">cumprod()累计乘积     </span><br><span class="line">skew()偏斜          </span><br><span class="line">kurt()峰度           </span><br><span class="line">quantile()分位数</span><br><span class="line">apply()通用申请       </span><br><span class="line">cov()协方差         </span><br><span class="line">corr() 相关系数</span><br></pre></td></tr></table></figure>
<h1 id="描述性统计"><a href="#描述性统计" class="headerlink" title="描述性统计"></a>描述性统计</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">df.describe(include=[<span class="string">&#x27;object&#x27;</span>])    <span class="comment">#object - 汇总字符串列  number - 汇总数字列 all - 将所有列汇总在一起(不应将其作为列表值传递)</span></span><br><span class="line">df.describe().<span class="built_in">round</span>(<span class="number">2</span>)   <span class="comment"># 只保留两位小数</span></span><br><span class="line">df.describe().<span class="built_in">round</span>(<span class="number">2</span>).T   <span class="comment">#只保留两位小数并转置</span></span><br><span class="line">df.groupby(<span class="string">&#x27;性别&#x27;</span>).describe().unstack()</span><br><span class="line">df.groupby(<span class="string">&#x27;性别&#x27;</span>)[<span class="string">&#x27;身高&#x27;</span>].describe().unstack()</span><br><span class="line">df.<span class="built_in">round</span>(<span class="number">3</span>)  <span class="comment"># 数据可以取消科学计数法？</span></span><br><span class="line">df = df.<span class="built_in">round</span>(<span class="number">0</span>)   <span class="comment"># 都改为整数</span></span><br><span class="line"><span class="comment"># 保留2位小数</span></span><br><span class="line">df[<span class="string">&#x27;a&#x27;</span>]=df[<span class="string">&#x27;mean&#x27;</span>].<span class="built_in">round</span>(decimals=<span class="number">2</span>) </span><br><span class="line">df[<span class="string">&#x27;b&#x27;</span>]=df[<span class="string">&#x27;mean&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> x:(<span class="string">&quot;%.2f&quot;</span>)%x) </span><br><span class="line">df[<span class="string">&#x27;c&#x27;</span>]=df[<span class="string">&#x27;mean&#x27;</span>].<span class="built_in">map</span>(<span class="keyword">lambda</span> x:<span class="built_in">format</span>(x,<span class="string">&quot;.2%&quot;</span>))</span><br><span class="line">description = [data.<span class="built_in">min</span>(), data.<span class="built_in">max</span>(), data.mean(), data.std()]  <span class="comment"># 依次计算最小值、最大值、均值、标准差</span></span><br><span class="line">description = pd.DataFrame(description, index = [<span class="string">&#x27;Min&#x27;</span>, <span class="string">&#x27;Max&#x27;</span>, <span class="string">&#x27;Mean&#x27;</span>, <span class="string">&#x27;STD&#x27;</span>]).T  <span class="comment"># 将结果存入数据框</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;描述性统计结果：\n&#x27;</span>,np.<span class="built_in">round</span>(description, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<h1 id="数据预览"><a href="#数据预览" class="headerlink" title="数据预览"></a>数据预览</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在cmd中安装</span></span><br><span class="line">pip install pandas-profiling   </span><br><span class="line"><span class="keyword">import</span>  pandas_profiling</span><br><span class="line">pro = pandas_profiling.ProfileReport(data1)</span><br><span class="line">pro.to_file(<span class="string">&#x27;output_file.html&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="显示百分比"><a href="#显示百分比" class="headerlink" title="显示百分比"></a>显示百分比</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 元素变化百分比 每个元素与其前一个元素进行比较，并计算变化百分比</span></span><br><span class="line">df.pct_change() </span><br></pre></td></tr></table></figure>
<h1 id="协方差"><a href="#协方差" class="headerlink" title="协方差"></a>协方差</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 协方差，cov用来计算序列对象之间的协方差</span></span><br><span class="line">s1.cov(s2)</span><br><span class="line">df[<span class="string">&#x27;a&#x27;</span>].cov(df[<span class="string">&#x27;b&#x27;</span>])</span><br></pre></td></tr></table></figure>
<h1 id="相关性"><a href="#相关性" class="headerlink" title="相关性"></a>相关性</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 相关性，pearson(默认)，spearman和kendall之间的相关性</span></span><br><span class="line">df[<span class="string">&#x27;a&#x27;</span>].corr(df[<span class="string">&#x27;b&#x27;</span>]，method =<span class="string">&#x27;spearman&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (frame.corr())</span><br></pre></td></tr></table></figure>
<h1 id="排名"><a href="#排名" class="headerlink" title="排名"></a>排名</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s.rank() 或者 df.rank()  </span><br><span class="line"><span class="comment"># （axis=0）或列（axis=1）  </span></span><br><span class="line"><span class="comment">#  ascending=True 正向排名或者反向排名</span></span><br><span class="line"><span class="comment">#  method （average ：并列组平均排名，min ：组中最低排名，max ：组中最高等级，first ：按在数组中出现的顺序分配等级）</span></span><br></pre></td></tr></table></figure>
<h1 id="分组计算"><a href="#分组计算" class="headerlink" title="分组计算"></a>分组计算</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多组运算</span></span><br><span class="line">df.groupby([<span class="string">&#x27;班级&#x27;</span>,<span class="string">&#x27;性别&#x27;</span>])[<span class="string">&#x27;身高&#x27;</span>].agg([np.<span class="built_in">sum</span>,np.mean,np.std])</span><br><span class="line">df.groupby([<span class="string">&#x27;班级&#x27;</span>,<span class="string">&#x27;性别&#x27;</span>]).agg(&#123;<span class="string">&#x27;身高&#x27;</span>:[<span class="string">&#x27;min&#x27;</span>],<span class="string">&#x27;体重&#x27;</span>:[<span class="string">&#x27;max&#x27;</span>]&#125;)</span><br><span class="line">df.groupby(<span class="string">&#x27;flee&#x27;</span>).agg(&#123;<span class="string">&#x27;身高&#x27;</span>: [np.median, np.mean], <span class="string">&#x27;signs&#x27;</span>: np.mean&#125;)</span><br><span class="line">df.agg(&#123;<span class="string">&#x27;A&#x27;</span>:np.<span class="built_in">sum</span>,<span class="string">&#x27;B&#x27;</span>:np.mean&#125;)  <span class="comment"># 对不同列进行不同的计算</span></span><br><span class="line">df[[<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;B&#x27;</span>]].agg([np.<span class="built_in">sum</span>,np.mean,np.<span class="built_in">min</span>])  <span class="comment"># 对多个变量进行多种计算</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间分组 ，先用pd.to_datetime(字段,格式)将某一列转成日期格式</span></span><br><span class="line">df.groupby(df[<span class="string">&#x27;生日&#x27;</span>].apply(<span class="keyword">lambda</span> x:x.year)).count()</span><br><span class="line"><span class="comment"># 分组后选第一个,一般数据先排序</span></span><br><span class="line">df.groupby(df[<span class="string">&#x27;生日&#x27;</span>].apply(<span class="keyword">lambda</span> x:x.year),as_index=<span class="literal">False</span>).first()       <span class="comment"># Tail(n=1) head()</span></span><br><span class="line"><span class="comment"># 找到每组中只有一个数据的</span></span><br><span class="line">df.groupby(df[<span class="string">&#x27;生日&#x27;</span>].apply(<span class="keyword">lambda</span> x:x.month),as_index=<span class="literal">False</span>).<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: <span class="built_in">len</span>(x)==<span class="number">1</span>)</span><br><span class="line">data2.groupby(<span class="string">&#x27;var&#x27;</span>).<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:<span class="built_in">len</span>(x)&gt;=<span class="number">10</span>)</span><br><span class="line">data.groupby(data.index.year)[<span class="string">&#x27;年龄&#x27;</span>].mean()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加权平均</span></span><br><span class="line">final3_1 = data_jiep.groupby([<span class="string">&#x27;产业线&#x27;</span>,<span class="string">&#x27;模号&#x27;</span>]).apply(<span class="keyword">lambda</span> g: np.average(g[<span class="string">&#x27;平均节拍&#x27;</span>], weights=g[<span class="string">&#x27;模次&#x27;</span>])).reset_index()</span><br><span class="line"></span><br><span class="line"><span class="comment"># groupby作图</span></span><br><span class="line">data.groupby(<span class="string">&#x27;race&#x27;</span>)[<span class="string">&#x27;flee&#x27;</span>].value_counts().unstack().plot(kind=<span class="string">&#x27;bar&#x27;</span>, figsize=(<span class="number">20</span>, <span class="number">4</span>))</span><br><span class="line">data.groupby(<span class="string">&#x27;flee&#x27;</span>)[<span class="string">&#x27;age&#x27;</span>].plot(kind=<span class="string">&#x27;kde&#x27;</span>, legend=<span class="literal">True</span>, figsize=(<span class="number">20</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># groupby中的几个函数</span></span><br><span class="line"><span class="comment"># 累计  </span></span><br><span class="line">df.groupby(<span class="string">&#x27;key&#x27;</span>).aggregate(<span class="string">&#x27;min&#x27;</span>, np.median, <span class="built_in">max</span>)</span><br><span class="line"><span class="comment"># 过滤   </span></span><br><span class="line">df.groupby(<span class="string">&#x27;key&#x27;</span>).<span class="built_in">filter</span>(某个函数)</span><br><span class="line"><span class="comment"># 转换    </span></span><br><span class="line">df.groupby(<span class="string">&#x27;key&#x27;</span>).transform(<span class="keyword">lambda</span> x: x- x.mean())</span><br><span class="line"></span><br><span class="line"><span class="comment">#通过某一个字段分组后，选另一个字段的最小值，构成的数据</span></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">&#x27;AAA&#x27;</span>: [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>],<span class="string">&#x27;BBB&#x27;</span>: [<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line">df.loc[df.groupby(<span class="string">&quot;AAA&quot;</span>)[<span class="string">&quot;BBB&quot;</span>].idxmin()]</span><br><span class="line"><span class="comment"># 按照一个字段排序，另一个字段分组，选取第一个</span></span><br><span class="line">df.sort_values(by=<span class="string">&quot;BBB&quot;</span>).groupby(<span class="string">&quot;AAA&quot;</span>, as_index=<span class="literal">False</span>).first()  <span class="comment">#重新设置索引</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># transform后数据大小不变</span></span><br><span class="line">df[<span class="string">&quot;Order_Total&quot;</span>] = df.groupby(<span class="string">&#x27;order&#x27;</span>)[<span class="string">&quot;ext price&quot;</span>].transform(<span class="string">&#x27;sum&#x27;</span>)</span><br><span class="line"></span><br><span class="line">result0 = data1.to_period(<span class="string">&#x27;Q&#x27;</span>).groupby(level=<span class="number">0</span>).apply(<span class="keyword">lambda</span> x :<span class="built_in">len</span>(x[<span class="string">&#x27;var&#x27;</span>].unique().tolist()))</span><br></pre></td></tr></table></figure>
<h1 id="交叉表"><a href="#交叉表" class="headerlink" title="交叉表"></a>交叉表</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result1 = pd.crosstab(data.index,data[<span class="string">&#x27;产业线&#x27;</span>],margins=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="数据透视表"><a href="#数据透视表" class="headerlink" title="数据透视表"></a>数据透视表</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">df.pivot_table(<span class="string">&#x27;价格&#x27;</span>,index=<span class="string">&#x27;产地&#x27;</span>,columns=<span class="string">&#x27;类别&#x27;</span>,aggfunc=<span class="string">&#x27;max&#x27;</span>,margins=<span class="literal">True</span>,fill_value=<span class="number">0</span>,margins_name=<span class="string">&#x27;合计&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用字典形式，可不用values参数</span></span><br><span class="line">df.pivot_table(index=<span class="string">&#x27;sex&#x27;</span>, columns=<span class="string">&#x27;class&#x27;</span>, aggfunc=&#123;<span class="string">&#x27;surviced&#x27;</span>:<span class="string">&#x27;sum&#x27;</span>, <span class="string">&#x27;fare&#x27;</span>:<span class="string">&#x27;mean&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">result  = data.pivot_table(index=data3.to_period(<span class="string">&#x27;M&#x27;</span>).index,columns= <span class="string">&#x27;是否异常&#x27;</span>,values=<span class="string">&#x27;模号&#x27;</span>, aggfunc=<span class="string">&#x27;count&#x27;</span>)</span><br><span class="line"></span><br><span class="line">result1 = data.pivot_table(index= <span class="string">&#x27;var1&#x27;</span>,columns=data[<span class="string">&#x27;var3&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.strftime(<span class="string">&#x27;%Y&#x27;</span>)),</span><br><span class="line">                      aggfunc=<span class="string">&#x27;count&#x27;</span>,values=<span class="string">&#x27;var2&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h1 id="窗口函数"><a href="#窗口函数" class="headerlink" title="窗口函数"></a>窗口函数</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#索引需要为日期 对于明细数据，计算固定大小区域的指标</span></span><br><span class="line">s = pd.Series(np.random.randn(<span class="number">1000</span>),index=pd.date_range(<span class="string">&#x27;1/1/2000&#x27;</span>, periods=<span class="number">1000</span>))</span><br><span class="line">s = s.cumsum()</span><br><span class="line">r = s.rolling(window=<span class="number">60</span>)   </span><br><span class="line"><span class="comment"># window：移动窗口的大小</span></span><br><span class="line"><span class="comment"># min_periods：需要的非空数据点的阈值（否则结果为NA）</span></span><br><span class="line"><span class="comment"># center：布尔值，是否将标签设置在中间（默认为False）</span></span><br><span class="line"></span><br><span class="line">df[<span class="string">&#x27;数量_re&#x27;</span>] = df[<span class="string">&#x27;数量&#x27;</span>].rolling(<span class="string">&#x27;7D&#x27;</span>).<span class="built_in">sum</span>()</span><br><span class="line"></span><br><span class="line">data1 = data.set_index(<span class="string">&#x27;入库日期&#x27;</span>).groupby(<span class="string">&#x27;供应商&#x27;</span>)[<span class="string">&#x27;入库量&#x27;</span>].rolling(<span class="string">&#x27;7D&#x27;</span>).<span class="built_in">sum</span>().reset_index()</span><br></pre></td></tr></table></figure>
<h1 id="标准化"><a href="#标准化" class="headerlink" title="标准化"></a>标准化</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当越小越好时</span></span><br><span class="line">df[<span class="string">&#x27;var_nor&#x27;</span>] = (df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">max</span>() - df[<span class="string">&#x27;var&#x27;</span>]) / (df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">max</span>() - df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">min</span>())</span><br><span class="line"><span class="comment"># 当越大越好时</span></span><br><span class="line">df[<span class="string">&#x27;var_nor&#x27;</span>] = (df[<span class="string">&#x27;var&#x27;</span>] - df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">min</span>()) / (df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">max</span>() - df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">min</span>())</span><br><span class="line"><span class="comment"># 当中值为好是</span></span><br><span class="line">df[<span class="string">&#x27;var&#x27;</span>] = np.<span class="built_in">abs</span>(df[<span class="string">&#x27;var&#x27;</span>]-标准值)</span><br><span class="line">df[<span class="string">&#x27;var_nor&#x27;</span>] = (df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">max</span>() - df[<span class="string">&#x27;var&#x27;</span>]) / (df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">max</span>() - df[<span class="string">&#x27;var&#x27;</span>].<span class="built_in">min</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以写成通用函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">data,col</span>):</span><br><span class="line">    col_name = col + <span class="string">&#x27;_nor&#x27;</span></span><br><span class="line">    data_gp = data.groupby(<span class="string">&#x27;类别&#x27;</span>).mean()</span><br><span class="line">    data_gp[col_name] = (data_gp[col] - data_gp[col].<span class="built_in">min</span>() ) / (data_gp[col].<span class="built_in">max</span>() - data_gp[col].<span class="built_in">min</span>() )</span><br><span class="line">    <span class="keyword">return</span> data_gp</span><br></pre></td></tr></table></figure>
<h1 id="去除异常值"><a href="#去除异常值" class="headerlink" title="去除异常值"></a>去除异常值</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f2</span>(<span class="params">data,col</span>):</span><br><span class="line">    q1 = data[col].quantile(q=<span class="number">0.25</span>)     </span><br><span class="line">    q3 = data[col].quantile(q=<span class="number">0.75</span>)</span><br><span class="line">    iqr = q3 - q1</span><br><span class="line">    t1 = q1 - <span class="number">3</span>*iqr</span><br><span class="line">    t2 = q3 + <span class="number">3</span>*iqr</span><br><span class="line">    <span class="keyword">return</span> data[(data[col]&gt;t1)&amp;(data[col]&lt;t2)][[<span class="string">&#x27;类别&#x27;</span>,col]]</span><br></pre></td></tr></table></figure>
<h1 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data_norm = pd.DataFrame(&#123;<span class="string">&#x27;正太分布&#x27;</span>:np.random.normal(loc=<span class="number">60</span>,scale=<span class="number">15</span>,size=<span class="number">10000</span>)&#125;)</span><br><span class="line">data_exp = pd.DataFrame(&#123;<span class="string">&#x27;指数分布&#x27;</span>:np.random.exponential(scale=<span class="number">15</span>,size=<span class="number">10000</span>)+<span class="number">45</span>&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="随机选择"><a href="#随机选择" class="headerlink" title="随机选择"></a>随机选择</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;strategy&#x27;</span>] = np.random.choice([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="number">99</span>)</span><br></pre></td></tr></table></figure>
<h1 id="行列求和"><a href="#行列求和" class="headerlink" title="行列求和"></a>行列求和</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 增加列合计</span></span><br><span class="line">df[<span class="string">&#x27;合计&#x27;</span>]  = df.<span class="built_in">sum</span>(axis=<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 增加行合计</span></span><br><span class="line">df.loc[<span class="string">&#x27;合计&#x27;</span>]  = df.<span class="built_in">sum</span>(axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h1 id="数据平移"><a href="#数据平移" class="headerlink" title="数据平移"></a>数据平移</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">&#x27;经度_前1天&#x27;</span>] = data.groupby(<span class="string">&#x27;var&#x27;</span>)[<span class="string">&#x27;经度&#x27;</span>].shift(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h1 id="宽窄表转换"><a href="#宽窄表转换" class="headerlink" title="宽窄表转换"></a>宽窄表转换</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">test = pd.DataFrame(fake_data, columns=[<span class="string">&#x27;subject&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>])</span><br><span class="line">test</span><br><span class="line">    subject    A    B    C</span><br><span class="line"><span class="number">0</span>    math      <span class="number">88</span>   <span class="number">70</span>   <span class="number">60</span></span><br><span class="line"><span class="number">1</span>    english   <span class="number">90</span>   <span class="number">80</span>   <span class="number">78</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 转换为窄表</span></span><br><span class="line">pd.melt(test, id_vars=[<span class="string">&#x27;subject&#x27;</span>])</span><br><span class="line">data3 = pd.melt(data2, id_vars=[<span class="string">&#x27;var1&#x27;</span>,<span class="string">&#x27;var2&#x27;</span>])</span><br><span class="line">     subject    variable    value</span><br><span class="line"><span class="number">0</span>    math       A           <span class="number">88</span></span><br><span class="line"><span class="number">1</span>    english    A           <span class="number">90</span></span><br><span class="line"><span class="number">2</span>    math       B           <span class="number">70</span></span><br><span class="line"><span class="number">3</span>    english    B           <span class="number">80</span></span><br><span class="line"><span class="number">4</span>    math       C           <span class="number">60</span></span><br><span class="line"><span class="number">5</span>    english    C           <span class="number">78</span></span><br></pre></td></tr></table></figure>
<h1 id="转二维表"><a href="#转二维表" class="headerlink" title="转二维表"></a>转二维表</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.to_numpy()</span><br></pre></td></tr></table></figure>
<h1 id="字典转列表"><a href="#字典转列表" class="headerlink" title="字典转列表"></a>字典转列表</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.set_index(<span class="string">&#x27;ID&#x27;</span>).T.to_dict(<span class="string">&#x27;list&#x27;</span>)</span><br><span class="line">&#123;<span class="string">&#x27;p&#x27;</span>: [<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>], <span class="string">&#x27;q&#x27;</span>: [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>], <span class="string">&#x27;r&#x27;</span>: [<span class="number">4</span>, <span class="number">0</span>, <span class="number">9</span>]&#125;</span><br></pre></td></tr></table></figure>
<h1 id="转字典列表"><a href="#转字典列表" class="headerlink" title="转字典列表"></a>转字典列表</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">datajs = data.to_json(orient=<span class="string">&#x27;records&#x27;</span>,force_ascii=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 名称，经度，维度，数值</span></span><br><span class="line">[&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;虹桥火车站&quot;</span>,<span class="string">&quot;lng&quot;</span>:<span class="number">121.327908</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">31.20033</span>,<span class="string">&quot;value&quot;</span>:<span class="number">3.5225437574</span>&#125;,&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;上海火车站&quot;</span>,<span class="string">&quot;lng&quot;</span>:<span class="number">121.46396</span>,<span class="string">&quot;lat&quot;</span>:<span class="number">31.255155</span>,<span class="string">&quot;value&quot;</span>:<span class="number">7.0937954904</span>&#125;]</span><br></pre></td></tr></table></figure>
<h1 id="两列中的较大值"><a href="#两列中的较大值" class="headerlink" title="两列中的较大值"></a>两列中的较大值</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[<span class="string">&#x27;z&#x27;</span>]=df[[<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>]].<span class="built_in">max</span>(axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
                </div>

                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2023/12/03/8%E4%B8%AA%E5%B8%B8%E7%94%A8%E7%9A%84python%E5%8A%9E%E5%85%AC%E5%AE%A4%E8%87%AA%E5%8A%A8%E5%8C%96%E6%8A%80%E5%B7%A7/"
                                   title="8个常用的python办公室自动化技巧"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">8个常用的python办公室自动化技巧</span>
                                        <span class="post-nav-item">上一篇</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2023/12/03/Python%E4%B8%AD%E7%9A%84%E6%97%A5%E6%9C%9F%E6%95%B0%E6%8D%AE/"
                                   title="Python中的日期数据"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Python中的日期数据</span>
                                        <span class="post-nav-item">下一篇</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="nav-text">导入工具包</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#spyder%E4%B8%AD%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F"><span class="nav-text">spyder中快捷方式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96excel%E6%96%87%E4%BB%B6"><span class="nav-text">读取excel文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96csv%E5%92%8Ctxt%E6%96%87%E4%BB%B6"><span class="nav-text">读取csv和txt文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E8%AF%BB%E5%8F%96%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%96%87%E4%BB%B61"><span class="nav-text">批量读取同一文件夹下文件1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E8%AF%BB%E5%8F%96%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B62"><span class="nav-text">批量读取同一文件夹下的文件2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E8%AF%BB%E5%8F%96%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B63"><span class="nav-text">批量读取同一文件夹下的文件3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E4%B8%BAexcel%EF%BC%8C%E5%90%8C%E4%B8%80%E5%B7%A5%E4%BD%9C%E7%B0%BF"><span class="nav-text">数据导出为excel，同一工作簿</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E4%B8%BAexcel%EF%BC%8C%E5%88%86%E7%BB%84%E5%AF%BC%E5%87%BA%E5%88%B0%E5%90%8C%E4%B8%80%E5%B7%A5%E4%BD%9C%E7%B0%BF"><span class="nav-text">数据导出为excel，分组导出到同一工作簿</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E4%B8%BAexcel%EF%BC%8C%E5%88%86%E7%BB%84%E5%AF%BC%E5%87%BA%E5%88%B0%E4%B8%8D%E5%90%8C%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%B0%BF"><span class="nav-text">数据导出为excel，分组导出到不同的工作簿</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4"><span class="nav-text">获取当前时间</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E5%9B%BE%E7%89%87%E5%88%86%E8%BE%A8%E7%8E%87%E8%AE%BE%E7%BD%AE"><span class="nav-text">保存图片分辨率设置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%9F%A5%E7%9C%8B"><span class="nav-text">数据查看</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%8C%E5%88%97%E5%A4%84%E7%90%86%EF%BC%88%E5%88%A0%E9%99%A4%E3%80%81%E6%8E%92%E5%BA%8F%EF%BC%89"><span class="nav-text">行列处理（删除、排序）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%BA%E5%A4%B1%E5%80%BC%EF%BC%88%E6%9F%A5%E7%9C%8B%E3%80%81%E6%9B%BF%E6%8D%A2%E3%80%81%E8%AE%A1%E6%95%B0%EF%BC%89"><span class="nav-text">缺失值（查看、替换、计数）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8D%E5%A4%8D%E5%80%BC%EF%BC%88%E6%9F%A5%E7%9C%8B%E3%80%81%E5%88%A0%E9%99%A4%EF%BC%89"><span class="nav-text">重复值（查看、删除）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%A0%BC%E5%BC%8F-%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2-%E7%99%BE%E5%88%86%E6%AF%94-%E6%A0%BC%E5%BC%8F%E5%88%A4%E6%96%AD"><span class="nav-text">修改格式((格式转换, 百分比, 格式判断))</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E7%AD%9B%E9%80%89"><span class="nav-text">普通筛选</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD%E5%90%8E%E7%AD%9B%E9%80%89"><span class="nav-text">逻辑判断后筛选</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%90%8E%E7%AD%9B%E9%80%89"><span class="nav-text">分组后筛选</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9B%BF%E6%8D%A2"><span class="nav-text">替换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="nav-text">字符串处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%A4%E6%96%AD"><span class="nav-text">字符串判断</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%86%E5%88%86"><span class="nav-text">字符串拆分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-text">索引</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F"><span class="nav-text">排序</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F"><span class="nav-text">日期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E4%B8%BA%E5%81%87%E6%9C%9F"><span class="nav-text">判断是否为假期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84"><span class="nav-text">数据分组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E5%90%88%E5%B9%B6"><span class="nav-text">多表合并</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-text">常用函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%BB%9F%E8%AE%A1"><span class="nav-text">描述性统计</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%A2%84%E8%A7%88"><span class="nav-text">数据预览</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E7%99%BE%E5%88%86%E6%AF%94"><span class="nav-text">显示百分比</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%8F%E6%96%B9%E5%B7%AE"><span class="nav-text">协方差</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%80%A7"><span class="nav-text">相关性</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%92%E5%90%8D"><span class="nav-text">排名</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E8%AE%A1%E7%AE%97"><span class="nav-text">分组计算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%A4%E5%8F%89%E8%A1%A8"><span class="nav-text">交叉表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%80%8F%E8%A7%86%E8%A1%A8"><span class="nav-text">数据透视表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0"><span class="nav-text">窗口函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E5%8C%96"><span class="nav-text">标准化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%BB%E9%99%A4%E5%BC%82%E5%B8%B8%E5%80%BC"><span class="nav-text">去除异常值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83"><span class="nav-text">正态分布</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E9%80%89%E6%8B%A9"><span class="nav-text">随机选择</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%8C%E5%88%97%E6%B1%82%E5%92%8C"><span class="nav-text">行列求和</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%B9%B3%E7%A7%BB"><span class="nav-text">数据平移</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%BD%E7%AA%84%E8%A1%A8%E8%BD%AC%E6%8D%A2"><span class="nav-text">宽窄表转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AC%E4%BA%8C%E7%BB%B4%E8%A1%A8"><span class="nav-text">转二维表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E5%85%B8%E8%BD%AC%E5%88%97%E8%A1%A8"><span class="nav-text">字典转列表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AC%E5%AD%97%E5%85%B8%E5%88%97%E8%A1%A8"><span class="nav-text">转字典列表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%A4%E5%88%97%E4%B8%AD%E7%9A%84%E8%BE%83%E5%A4%A7%E5%80%BC"><span class="nav-text">两列中的较大值</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="border-box website-info-box default">
        
            <div class="copyright-info info-item default">
                &copy;&nbsp;<span>2023</span>&nbsp;-&nbsp;2023
                
                    &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">不凡</a>
                
            </div>

            <div class="theme-info info-item default">
                由&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;驱动&nbsp;&&nbsp;主题&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
            </div>

            

            
        

        <div class="count-item info-item default">
            

            
                <span class="count-box border-box uv">
                    <span class="item-type border-box">访客数</span>
                    <span class="item-value border-box uv" id="busuanzi_value_site_uv"></span>
                </span>
            

            
                <span class="count-box border-box pv">
                    <span class="item-type border-box">访问量</span>
                    <span class="item-value border-box pv" id="busuanzi_value_site_pv"></span>
                </span>
            
        </div>
    </div>
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="tools-list border-box">
        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-toggle-theme-mode flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    .zoom-in-image-mask {
  position fixed
  top 0
  right 0
  bottom 0
  left 0
  z-index $z-index-8
  display flex
  align-items center
  justify-content center
  box-sizing border-box
  background rgba(0, 0, 0, 0)
  visibility hidden
  transition-t("visibility, background", "0, 0", "0.3, 0.3", "linear, linear")

  &.show {
    background rgba(0, 0, 0, 0.5)
    visibility visible

    .zoom-in-image {
      cursor zoom-out
    }
  }

  .zoom-in-image {
    position absolute
    z-index $z-index-9
    transform-origin center center
    will-change transform
    transition-t("transform", "0", "0.3", "linear")
  }
}


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="nav-text">导入工具包</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#spyder%E4%B8%AD%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F"><span class="nav-text">spyder中快捷方式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96excel%E6%96%87%E4%BB%B6"><span class="nav-text">读取excel文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96csv%E5%92%8Ctxt%E6%96%87%E4%BB%B6"><span class="nav-text">读取csv和txt文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E8%AF%BB%E5%8F%96%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E6%96%87%E4%BB%B61"><span class="nav-text">批量读取同一文件夹下文件1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E8%AF%BB%E5%8F%96%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B62"><span class="nav-text">批量读取同一文件夹下的文件2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E8%AF%BB%E5%8F%96%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B63"><span class="nav-text">批量读取同一文件夹下的文件3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E4%B8%BAexcel%EF%BC%8C%E5%90%8C%E4%B8%80%E5%B7%A5%E4%BD%9C%E7%B0%BF"><span class="nav-text">数据导出为excel，同一工作簿</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E4%B8%BAexcel%EF%BC%8C%E5%88%86%E7%BB%84%E5%AF%BC%E5%87%BA%E5%88%B0%E5%90%8C%E4%B8%80%E5%B7%A5%E4%BD%9C%E7%B0%BF"><span class="nav-text">数据导出为excel，分组导出到同一工作簿</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA%E4%B8%BAexcel%EF%BC%8C%E5%88%86%E7%BB%84%E5%AF%BC%E5%87%BA%E5%88%B0%E4%B8%8D%E5%90%8C%E7%9A%84%E5%B7%A5%E4%BD%9C%E7%B0%BF"><span class="nav-text">数据导出为excel，分组导出到不同的工作簿</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4"><span class="nav-text">获取当前时间</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E5%9B%BE%E7%89%87%E5%88%86%E8%BE%A8%E7%8E%87%E8%AE%BE%E7%BD%AE"><span class="nav-text">保存图片分辨率设置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%9F%A5%E7%9C%8B"><span class="nav-text">数据查看</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%8C%E5%88%97%E5%A4%84%E7%90%86%EF%BC%88%E5%88%A0%E9%99%A4%E3%80%81%E6%8E%92%E5%BA%8F%EF%BC%89"><span class="nav-text">行列处理（删除、排序）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BC%BA%E5%A4%B1%E5%80%BC%EF%BC%88%E6%9F%A5%E7%9C%8B%E3%80%81%E6%9B%BF%E6%8D%A2%E3%80%81%E8%AE%A1%E6%95%B0%EF%BC%89"><span class="nav-text">缺失值（查看、替换、计数）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8D%E5%A4%8D%E5%80%BC%EF%BC%88%E6%9F%A5%E7%9C%8B%E3%80%81%E5%88%A0%E9%99%A4%EF%BC%89"><span class="nav-text">重复值（查看、删除）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%A0%BC%E5%BC%8F-%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2-%E7%99%BE%E5%88%86%E6%AF%94-%E6%A0%BC%E5%BC%8F%E5%88%A4%E6%96%AD"><span class="nav-text">修改格式((格式转换, 百分比, 格式判断))</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E7%AD%9B%E9%80%89"><span class="nav-text">普通筛选</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD%E5%90%8E%E7%AD%9B%E9%80%89"><span class="nav-text">逻辑判断后筛选</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%90%8E%E7%AD%9B%E9%80%89"><span class="nav-text">分组后筛选</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9B%BF%E6%8D%A2"><span class="nav-text">替换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="nav-text">字符串处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%A4%E6%96%AD"><span class="nav-text">字符串判断</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%86%E5%88%86"><span class="nav-text">字符串拆分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-text">索引</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F"><span class="nav-text">排序</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F"><span class="nav-text">日期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E4%B8%BA%E5%81%87%E6%9C%9F"><span class="nav-text">判断是否为假期</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84"><span class="nav-text">数据分组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E5%90%88%E5%B9%B6"><span class="nav-text">多表合并</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="nav-text">常用函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%BB%9F%E8%AE%A1"><span class="nav-text">描述性统计</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%A2%84%E8%A7%88"><span class="nav-text">数据预览</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E7%99%BE%E5%88%86%E6%AF%94"><span class="nav-text">显示百分比</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%8F%E6%96%B9%E5%B7%AE"><span class="nav-text">协方差</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E6%80%A7"><span class="nav-text">相关性</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%92%E5%90%8D"><span class="nav-text">排名</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E8%AE%A1%E7%AE%97"><span class="nav-text">分组计算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%A4%E5%8F%89%E8%A1%A8"><span class="nav-text">交叉表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%80%8F%E8%A7%86%E8%A1%A8"><span class="nav-text">数据透视表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AA%97%E5%8F%A3%E5%87%BD%E6%95%B0"><span class="nav-text">窗口函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E5%8C%96"><span class="nav-text">标准化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%BB%E9%99%A4%E5%BC%82%E5%B8%B8%E5%80%BC"><span class="nav-text">去除异常值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83"><span class="nav-text">正态分布</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E9%80%89%E6%8B%A9"><span class="nav-text">随机选择</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A1%8C%E5%88%97%E6%B1%82%E5%92%8C"><span class="nav-text">行列求和</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%B9%B3%E7%A7%BB"><span class="nav-text">数据平移</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%BD%E7%AA%84%E8%A1%A8%E8%BD%AC%E6%8D%A2"><span class="nav-text">宽窄表转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AC%E4%BA%8C%E7%BB%B4%E8%A1%A8"><span class="nav-text">转二维表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%97%E5%85%B8%E8%BD%AC%E5%88%97%E8%A1%A8"><span class="nav-text">字典转列表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AC%E5%AD%97%E5%85%B8%E5%88%97%E8%A1%A8"><span class="nav-text">转字典列表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%A4%E5%88%97%E4%B8%AD%E7%9A%84%E8%BE%83%E5%A4%A7%E5%80%BC"><span class="nav-text">两列中的较大值</span></a></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>



<!-- common -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local-search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->


<div class="pjax">
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        
            
<script src="/js/post/toc.js"></script>

        

        <!-- copyright-info -->
        

        <!-- share -->
        
    

    <!-- category-page -->
    

    <!-- links-page -->
    

    <!-- photos-page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->

    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart()
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd()
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'))
            KEEP.initExecute()
        });
    });
</script>




</body>
</html>
